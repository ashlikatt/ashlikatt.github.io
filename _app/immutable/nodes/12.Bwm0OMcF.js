var re=Object.defineProperty;var oe=(n,e,s)=>e in n?re(n,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[e]=s;var f=(n,e,s)=>(oe(n,typeof e!="symbol"?e+"":e,s),s);import{s as V,e as z,n as J,f as P}from"../chunks/scheduler.DrUr7rw5.js";import{S as K,i as Q,e as B,o as d,c as M,a as L,p as $,d as E,k as A,g as v,q as g,m as w,n as _,r as y,s as C,f as I,h as ae,u as ie,t as le,b as ce,v as U}from"../chunks/index.BfAMNwJz.js";import{g as fe}from"../chunks/globals.D0QH3NT1.js";import{P as ue,H as pe}from"../chunks/pageData.CqP318gz.js";import{R as he,S as O,G as me,N as de,C as $e}from"../chunks/columns.C_S5v5-e.js";import{H as ge}from"../chunks/header.7nK5GaSa.js";import{C as we}from"../chunks/codebox.DPaNkXg4.js";import{H as _e}from"../chunks/horizontalLine.C8SjxlTV.js";function ye(n){let e;return{c(){e=B("p"),this.h()},l(s){e=M(s,"P",{id:!0,class:!0}),L(e).forEach(E),this.h()},h(){A(e,"id","console"),A(e,"class","textoutput svelte-1vkgyr3")},m(s,t){v(s,e,t),n[2](e)},p:J,d(s){s&&E(e),n[2](null)}}}function Ee(n){let e,s;return e=new _e({}),{c(){d(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,o){g(e,t,o),s=!0},i(t){s||(w(e.$$.fragment,t),s=!0)},o(t){_(e.$$.fragment,t),s=!1},d(t){y(e,t)}}}function ve(n){let e,s;return{c(){e=B("label"),s=B("input"),this.h()},l(t){e=M(t,"LABEL",{class:!0});var o=L(e);s=M(o,"INPUT",{id:!0,class:!0,spellcheck:!0}),o.forEach(E),this.h()},h(){A(s,"id","inputbox"),A(s,"class","cli svelte-1vkgyr3"),A(s,"spellcheck","false"),A(e,"class","svelte-1vkgyr3")},m(t,o){v(t,e,o),ae(e,s),n[3](s)},p:J,d(t){t&&E(e),n[3](null)}}}function xe(n){let e,s,t,o,a,i;return e=new O({props:{size:"9",padded:!0,$$slots:{default:[ye]},$$scope:{ctx:n}}}),t=new O({props:{size:"0",$$slots:{default:[Ee]},$$scope:{ctx:n}}}),a=new O({props:{size:"1",padded:!0,$$slots:{default:[ve]},$$scope:{ctx:n}}}),{c(){d(e.$$.fragment),s=C(),d(t.$$.fragment),o=C(),d(a.$$.fragment)},l(r){$(e.$$.fragment,r),s=I(r),$(t.$$.fragment,r),o=I(r),$(a.$$.fragment,r)},m(r,l){g(e,r,l),v(r,s,l),g(t,r,l),v(r,o,l),g(a,r,l),i=!0},p(r,l){const u={};l&17&&(u.$$scope={dirty:l,ctx:r}),e.$set(u);const p={};l&16&&(p.$$scope={dirty:l,ctx:r}),t.$set(p);const j={};l&18&&(j.$$scope={dirty:l,ctx:r}),a.$set(j)},i(r){i||(w(e.$$.fragment,r),w(t.$$.fragment,r),w(a.$$.fragment,r),i=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),_(a.$$.fragment,r),i=!1},d(r){r&&(E(s),E(o)),y(e,r),y(t,r),y(a,r)}}}function be(n){let e,s,t;return s=new he({props:{$$slots:{default:[xe]},$$scope:{ctx:n}}}),{c(){e=B("div"),d(s.$$.fragment),this.h()},l(o){e=M(o,"DIV",{class:!0});var a=L(e);$(s.$$.fragment,a),a.forEach(E),this.h()},h(){A(e,"class","svelte-1vkgyr3")},m(o,a){v(o,e,a),g(s,e,null),t=!0},p(o,[a]){const i={};a&19&&(i.$$scope={dirty:a,ctx:o}),s.$set(i)},i(o){t||(w(s.$$.fragment,o),t=!0)},o(o){_(s.$$.fragment,o),t=!1},d(o){o&&E(e),y(s)}}}function Ae(n,e,s){let{consoleElement:t=void 0}=e,{inputElement:o=void 0}=e;function a(r){z[r?"unshift":"push"](()=>{t=r,s(0,t)})}function i(r){z[r?"unshift":"push"](()=>{o=r,s(1,o)})}return n.$$set=r=>{"consoleElement"in r&&s(0,t=r.consoleElement),"inputElement"in r&&s(1,o=r.inputElement)},[t,o,a,i]}class Te extends K{constructor(e){super(),Q(this,e,Ae,be,V,{consoleElement:0,inputElement:1})}}class S extends Error{constructor(e,s,t){super("Compile Error: "+e+`
 At: line `+t+", column "+s)}}class D extends Error{constructor(e,s){super("Compile Error: "+e+`
 At: line `+s.y+", column "+s.x)}}class Ce extends Error{constructor(e,s){super("Compile Error: "+e+`
 At: line `+s.y+", column "+s.x)}}class m extends Error{constructor(e){super("Command Error: "+e)}}class Ie{constructor(){f(this,"tokens");f(this,"lastToken");this.tokens=[],this.lastToken=void 0}push(e){this.tokens.unshift(e)}next(){return this.lastToken=this.tokens.pop()}peek(e=0){return this.tokens[this.tokens.length-1-e]}get length(){return this.tokens.length}get x(){var e;return((e=this.lastToken)==null?void 0:e.x)||0}get y(){var e;return((e=this.lastToken)==null?void 0:e.y)||0}get after(){return{x:this.x,y:this.y}}}const h={COMMA:0,ARROW:1,IDENT:2},T={LEFT:0,RIGHT:1,BOTH:2};class k{constructor(e,s,t,o){f(this,"type");f(this,"data");f(this,"x");f(this,"y");this.type=e,this.data=s,this.x=t,this.y=o}get after(){return this.type===h.IDENT?{x:this.x+this.data.length,y:this.y}:this.type===h.ARROW?{x:this.x+2}:{x:this.x+1,y:this.y}}}function X(n){const e=new Ie;let s=0,t=0,o=1;for(;s<n.length;){if(s+1<n.length&&n[s]==="/"&&n[s+1]==="/"){for(;s<n.length&&n[s]!==`
`;)s++;continue}else if(n[s]==="<")if(s+1<n.length&&n[s+1]==="-")e.push(new k(h.ARROW,T.LEFT,t,o)),s++,t++;else throw new S("Unexpected character; expected '-' to complete '<-' token.",t+1,o);else if(n[s]==="-")if(s+1<n.length&&n[s+1]==="-")e.push(new k(h.ARROW,T.BOTH,t,o)),s++,t++;else if(s+1<n.length&&n[s+1]===">")e.push(new k(h.ARROW,T.RIGHT,t,o)),s++,t++;else throw new S("Unexpected character; expected '>' or '-' to complete '--' or '->' tokens.",t+1,o);else if(n[s]===",")e.push(new k(h.COMMA,void 0,t,o));else if(n[s]===`
`){o++,t=0,s++;continue}else if(F(n[s])){let a="";const i=t;for(;s<n.length&&F(n[s]);)a+=n[s],s++,t++;e.push(new k(h.IDENT,a,i,o));continue}else if(n[s].trim().length>0)throw new S("Unexpected character.",t,o);t++,s++}return e}function F(n){return/[a-zA-Z0-9_]/.test(n)}class je{constructor(){f(this,"areas");f(this,"acronyms");f(this,"revAcronyms");this.areas={},this.acronyms={},this.revAcronyms={}}get(e){return this.areas[e]?this.areas[e]:this.revAcronyms[e.toUpperCase()]}get areaList(){return Object.keys(this.areas)}addArea(e){this.areas[e.name]=e}getArea(e){return this.areas[e]||this.addArea(new ke(e)),this.areas[e]}toString(){return Object.keys(this.areas).map(e=>this.areas[e].toString()).join("; ")}updateAcronyms(){this.acronyms=We(this),this.revAcronyms={};for(const e in this.acronyms)this.revAcronyms[this.acronyms[e]]=this.areas[e]}}class ke{constructor(e){f(this,"name");f(this,"connections");this.name=e,this.connections={}}addConnection(e){e!==this.name&&!this.connections[e]&&(this.connections[e]=!0)}node(e=void 0){return new Re(this,e)}toString(){return this.name+" -> "+Object.keys(this.connections).join(", ")}}class Re{constructor(e,s=void 0){f(this,"area");f(this,"parent");this.area=e,this.parent=s}}function Oe(n){const e=new je;for(;n.length>0;)ze(n,e);return e.updateAcronyms(),e}function ze(n,e){if(n.length===0)throw new D("Expected statement, found none.",n.after);let s=G(n);for(;n.length>0&&n.peek(0).type===h.ARROW;){const t=n.next(),o=G(n);for(let a of s){a=e.getArea(a);for(let i of o)i=e.getArea(i),(t.data===T.LEFT||t.data===T.BOTH)&&i.addConnection(a.name),(t.data===T.RIGHT||t.data===T.BOTH)&&a.addConnection(i.name)}s=o}}function G(n){if(n.length===0)throw new D("Expected area list, found none.",n.after);const e=n.next();if(e.type!==h.IDENT)throw new Ce("Unexpected token: Expected area name.",e);const s=[e.data];for(;n.length>0&&n.peek(0).type===h.COMMA;){if(n.next(),n.length===0)throw new D("Expected another area, found none.",n.after);const t=n.next();if(t.type!==h.IDENT)throw new D("Unexpected token: Expected another area.",t);s.push(t.data)}return s}function Y(n){try{x=Oe(X(n)),ee=n}catch(e){te(e+"")}}var ee,x;const q={compile:n=>{c("Recompiling..."),Y(b.value),c("Done!")},help:n=>{c("help: Display this menu."),c("compile: Rebuilds the map from text input."),c("clear: Clears console."),c("path A B: Prints shortest path between A and B."),c("areas: Prints all areas, sorted alphabetically."),c("disjoint A?: Prints if the map is entirely interconnected [from a specific area]."),c("print Type?: Prints the map in text format. Types: raw (default), strict, compressed")},path:n=>Ne(x,n),clear:n=>ne(),areas:n=>{c("All areas: "+Object.keys(x.areas).sort().map(e=>e+" ("+x.acronyms[e]+")").join(", "))},disjoint:n=>{Se(x,n)},info:n=>{Me(x,n)},print:n=>{Ue(x,n)}};function De(n){try{c("| "+n);const e=X(n);if(e.length>0){const s=e.next();if(s.type!==h.IDENT)throw new m("Expected a valid function name.");const t=s.data;if(!q[t])throw new m("Invalid function, run 'help' for help.");q[t](e)}}catch(e){te(e+"")}}function Be(n,e,s){const t=[n.areas[e].node()],o=new Set;for(o.add(e);t.length>0;){const a=t.shift();if(a.area.name===s)return a;for(let i in a.area.connections)o.has(i)||(o.add(i),t.push(n.areas[i].node(a)))}}function Z(n,e){const s=[n.areas[e].node()],t=new Set;for(t.add(e);s.length>0;){const a=s.shift();for(let i in a.area.connections)t.has(i)||(t.add(i),s.push(n.areas[i].node(a)))}const o=[];for(let a of t.values())o.push(a);return o}function Me(n,e){if(e.length!==1)throw new m("Incorrect number of arguments.");const s=e.next();if(s.type!==h.IDENT)throw new m("Argument 1: Expected area name.");const t=s.data;if(!n.get(s.data))throw new m(s.data+" is not a valid area.");const o=n.get(t),a=Object.keys(n.get(t).connections);c("Name: "+o.name),c("Acronym: "+n.acronyms[o.name]);const i=[];for(const r of a)n.get(r).connections[o.name]?i.unshift(" -- "+r):i.push(" -> "+r);for(const r in n.areas)!o.connections[r]&&n.get(r).connections[o.name]&&i.push(" <- "+r);c("Connections: "+i.length),i.forEach(r=>c(r))}function Ne(n,e){if(e.length!==2)throw new m("Incorrect number of arguments.");const s=e.next();if(s.type!==h.IDENT)throw new m("Argument 1: Expected area name.");const t=e.next();if(t.type!==h.IDENT)throw new m("Argument 2: Expected area name.");if(!n.get(s.data))throw new m(s.data+" is not a valid area.");if(!n.get(t.data))throw new m(t.data+" is not a valid area.");const o=n.get(s.data).name,a=n.get(t.data).name,i=Be(n,o,a);if(i===void 0)c("No valid path from "+o+" to "+a+".");else{let r=i,l=[];for(;r!==void 0;)l.push(r.area.name),r=r.parent;c("Shortest path: "+l.reverse().join(" -> "))}}function Se(n,e){const s=n.areaList;if(s.length<2)return c("World is not disjoint. All areas can reach eachother.");if(e.length===1){const t=e.next();if(t.type!==h.IDENT)throw new m("Argument 1: Expected area name.");if(!n.get(t.data))throw new m(t.data+" is not a valid area.");let o=n.get(t.data).name;const a=Z(n,o);s.length===a.length?c("World is not disjoint from "+o+". It can reach all areas."):c("World is disjoint from "+o+". It cannot reach the following areas: "+s.filter(i=>!a.includes(i)).join(", "))}else if(e.length===0){let t=!1;for(const o of s){const a=Z(n,o);s.length!==a.length&&(t||c("================"),t=!0,c(o+" is disjoint. It cannot reach the following areas: "+s.filter(i=>!a.includes(i)).join(", ")))}c(t?"================":"World is not disjoint. All areas can reach eachother.")}else throw new m("Incorrect number of arguments.")}class He{constructor(e,s,t){f(this,"one");f(this,"two");f(this,"dual");this.one=e,this.two=s,this.dual=t}toString(){return this.dual?this.one+" -- "+this.two:this.one+" -> "+this.two}}class Pe{constructor(e){f(this,"str");f(this,"first");f(this,"last");this.str=e.toString(),this.first=e.one,this.last=e.two}connect(e){this.last===e.one?(this.str+=(e.dual?" -- ":" -> ")+e.two,this.last=e.two):this.last===e.two?(this.str+=(e.dual?" -- ":" -> ")+e.one,this.last=e.one):this.first===e.one?(this.str=e.two+(e.dual?" -- ":" <- ")+this.str,this.first=e.two):this.first===e.two&&(this.str=e.one+(e.dual?" -- ":" -> ")+this.str,this.first=e.one)}canConnect(e){return e.one===this.first||e.two===this.first||e.one===this.last||e.two===this.last}}function Ue(n,e){let s="raw";if(e.length>1)throw new m("Incorrect number of arguments.");if(e.length===1){let t=e.next();if(t.type!==h.IDENT)throw new m("Argument 1: Expected format type.");s=t.data}if(s==="raw")c("Map data:"),c("================"),c(ee),c("================");else if(s==="strict"){c("Strict map data:"),c("================");for(const t in n.areas){const o=Object.keys(n.areas[t].connections);c(o.length===0?t+" -> _":t+" -> "+o.join(", "))}c("================")}else if(s==="compressed"){c("Compressed map data:"),c("================");const t=n.areaList.map(i=>n.areas[i]).map(i=>Object.keys(i.connections).map(r=>new He(i.name,r,!1))).flat(),o=[];for(let i=0;i<t.length;i++){const r=t[i];let l=t.findIndex(u=>u.one===r.two&&u.two===r.one);l>-1?(r.dual=!0,o.push(r),t.splice(l,1)):o.push(r)}const a=[];e:for(const i of o){for(const r of a)if(r.canConnect(i)){r.connect(i);continue e}a.push(new Pe(i))}c(a.map(i=>i.str).join(`
`)),c("================")}else throw new m(s+" is not a valid format. Expected 'raw', 'strict', or 'compressed'")}function We(n){const e={},s=[];for(const t in n.areas)if(t.length<=3)e[t]=t,s.push(t);else{let o=H(t.replaceAll(/[^A-Z]/g,""),s)||Le(t.replaceAll(/[^A-Z]/g,""),s)||H(t[0].toUpperCase()+t.substring(1).toUpperCase().replaceAll(/[AEIOU]/g,""),s)||H(t.toUpperCase(),s);if(o)e[t]=o,s.push(o);else{let a=0,i;for(;s.includes(i=t.substring(0,1).toUpperCase()+a);)a++;e[t]=i,s.push(i)}}return e}function H(n,e){if(!(n.length<3))for(let s=0;s<n.length;s++)for(let t=s+1;t<n.length;t++)for(let o=t+1;t<n.length;o++){let a=n[s]+n[t]+n[o];if(!e.includes(a))return a}}function Le(n,e){if(!(n.length<2))for(let s=0;s<n.length;s++)for(let t=s+1;t<n.length;t++){let o=n[s]+n[t];if(!e.includes(o))return o}}var W="",N;function c(n){Fe(n+"<br>")}function Fe(n){W+=n,N.innerHTML=W.replaceAll(`
`,"<br>"),N.scroll(0,9999999)}function te(n){c(n.substring(7))}function ne(){W="",N.innerHTML=""}var b,R,se;function Ge(n){b=n,se=b==null?void 0:b.value,Y(b.value)}function qe(n){R=n,R.addEventListener("keyup",function(e){e.key==="Enter"&&(De(R.value),R.value="")}),R.focus()}function Ze(n){N=n,ne(),c("Type 'help' for help.")}function Ve(){return b.value!==se}const{window:Je}=fe;function Ke(n){let e;return{c(){e=le("Back")},l(s){e=ce(s,"Back")},m(s,t){v(s,e,t)},d(s){s&&E(e)}}}function Qe(n){let e,s;return e=new pe({props:{href:"tools",$$slots:{default:[Ke]},$$scope:{ctx:n}}}),{c(){d(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,o){g(e,t,o),s=!0},p(t,o){const a={};o&128&&(a.$$scope={dirty:o,ctx:t}),e.$set(a)},i(t){s||(w(e.$$.fragment,t),s=!0)},o(t){_(e.$$.fragment,t),s=!1},d(t){y(e,t)}}}function Xe(n){let e,s,t;function o(i){n[4](i)}let a={id:"jsonBox",init:`// Simple statements showing one-way and two-way connections:

  Cave -- Desert
  Forest -> Cave
  Forest -- Desert, Tundra

// The entire above could be written as the compound statement:

  Desert, Tundra -- Forest -> Cave -- Desert



// Try running 'info Forest' in the terminal line in the bottom right!
// Be sure you run 'compile' if you edit the data.`};return n[0]!==void 0&&(a.element=n[0]),e=new we({props:a}),z.push(()=>U(e,"element",o)),{c(){d(e.$$.fragment)},l(i){$(e.$$.fragment,i)},m(i,r){g(e,i,r),t=!0},p(i,r){const l={};!s&&r&1&&(s=!0,l.element=i[0],P(()=>s=!1)),e.$set(l)},i(i){t||(w(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){y(e,i)}}}function Ye(n){let e,s,t,o;function a(l){n[5](l)}function i(l){n[6](l)}let r={};return n[2]!==void 0&&(r.inputElement=n[2]),n[1]!==void 0&&(r.consoleElement=n[1]),e=new Te({props:r}),z.push(()=>U(e,"inputElement",a)),z.push(()=>U(e,"consoleElement",i)),{c(){d(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,u){g(e,l,u),o=!0},p(l,u){const p={};!s&&u&4&&(s=!0,p.inputElement=l[2],P(()=>s=!1)),!t&&u&2&&(t=!0,p.consoleElement=l[1],P(()=>t=!1)),e.$set(p)},i(l){o||(w(e.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),o=!1},d(l){y(e,l)}}}function et(n){let e,s,t,o;return e=new O({props:{size:"1",padded:!0,$$slots:{default:[Xe]},$$scope:{ctx:n}}}),t=new O({props:{size:"1",padded:!0,$$slots:{default:[Ye]},$$scope:{ctx:n}}}),{c(){d(e.$$.fragment),s=C(),d(t.$$.fragment)},l(a){$(e.$$.fragment,a),s=I(a),$(t.$$.fragment,a)},m(a,i){g(e,a,i),v(a,s,i),g(t,a,i),o=!0},p(a,i){const r={};i&129&&(r.$$scope={dirty:i,ctx:a}),e.$set(r);const l={};i&134&&(l.$$scope={dirty:i,ctx:a}),t.$set(l)},i(a){o||(w(e.$$.fragment,a),w(t.$$.fragment,a),o=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),o=!1},d(a){a&&E(s),y(e,a),y(t,a)}}}function tt(n){let e,s,t,o,a,i;return e=new de({}),t=new ge({props:{title:"Map Planner",$$slots:{default:[Qe]},$$scope:{ctx:n}}}),a=new $e({props:{$$slots:{default:[et]},$$scope:{ctx:n}}}),{c(){d(e.$$.fragment),s=C(),d(t.$$.fragment),o=C(),d(a.$$.fragment)},l(r){$(e.$$.fragment,r),s=I(r),$(t.$$.fragment,r),o=I(r),$(a.$$.fragment,r)},m(r,l){g(e,r,l),v(r,s,l),g(t,r,l),v(r,o,l),g(a,r,l),i=!0},p(r,l){const u={};l&128&&(u.$$scope={dirty:l,ctx:r}),t.$set(u);const p={};l&135&&(p.$$scope={dirty:l,ctx:r}),a.$set(p)},i(r){i||(w(e.$$.fragment,r),w(t.$$.fragment,r),w(a.$$.fragment,r),i=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),_(a.$$.fragment,r),i=!1},d(r){r&&(E(s),E(o)),y(e,r),y(t,r),y(a,r)}}}function nt(n){let e,s,t,o,a,i;return e=new ue({props:{title:"Map Planner",desc:"Tool for planning complex area-based games."}}),t=new me({props:{$$slots:{default:[tt]},$$scope:{ctx:n}}}),{c(){d(e.$$.fragment),s=C(),d(t.$$.fragment)},l(r){$(e.$$.fragment,r),s=I(r),$(t.$$.fragment,r)},m(r,l){g(e,r,l),v(r,s,l),g(t,r,l),o=!0,a||(i=ie(Je,"beforeunload",n[3]),a=!0)},p(r,[l]){const u={};l&135&&(u.$$scope={dirty:l,ctx:r}),t.$set(u)},i(r){o||(w(e.$$.fragment,r),w(t.$$.fragment,r),o=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),o=!1},d(r){r&&E(s),y(e,r),y(t,r),a=!1,i()}}}function st(n,e,s){let t,o,a;function i(p){if(Ve()){var j="Map data will be erased. Really leave?";return(p||window.event).returnValue=j,j}}function r(p){t=p,s(0,t)}function l(p){a=p,s(2,a)}function u(p){o=p,s(1,o)}return n.$$.update=()=>{n.$$.dirty&7&&(o&&Ze(o),a&&qe(a),t&&Ge(t))},[t,o,a,i,r,l,u]}class ht extends K{constructor(e){super(),Q(this,e,st,nt,V,{})}}export{ht as component};
