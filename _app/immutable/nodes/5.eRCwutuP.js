import{s as k,r as ee,e as G,f as R}from"../chunks/scheduler.DrUr7rw5.js";import{S as te,i as ne,o as p,s as y,p as c,f as E,q as u,g as _,u as F,m as $,n as h,d as x,r as d,t as U,b as D,v as H}from"../chunks/index.BfAMNwJz.js";import{P as re,H as se}from"../chunks/pageData.CqP318gz.js";import{G as ie,N as oe,R as K,S as C,C as ae}from"../chunks/columns.C_S5v5-e.js";import{H as fe}from"../chunks/header.7nK5GaSa.js";import{E as le}from"../chunks/externalHeaderButton.22lvPTKl.js";import{C as pe}from"../chunks/console.CuIvkw8x.js";import{C as J}from"../chunks/codebox.DPaNkXg4.js";import{B as ce}from"../chunks/button.DdlWDEYd.js";class m extends Error{constructor(e,t){super("Compile Error: "+e+`
 At: line `+t.y+", column "+t.x)}}class w extends Error{constructor(e,t){super("Compile Error: "+e+`
 At: line `+t.y+", column "+t.x)}}class b extends Error{constructor(e){super("Parse Error: "+e)}}class T extends Error{constructor(e){super("Runtime Error: "+e)}}class ue{constructor(){this.tokens=[],this.lastToken=void 0}push(e){this.tokens.unshift(e)}next(){return this.lastToken=this.tokens.pop()}peek(e=0){return this.tokens[this.tokens.length-1-e]}get length(){return this.tokens.length}get x(){var e;return((e=this.lastToken)==null?void 0:e.x)||0}get y(){var e;return((e=this.lastToken)==null?void 0:e.y)||0}get after(){return{x:this.x,y:this.y}}}const l={OPEN_ANGLE:0,CLOSE_ANGLE:1,IDENT:2,ARROW:3,EXTENSION:4,COMMA:5};class v{constructor(e,t,r,i){this.type=e,this.data=t,this.x=r,this.y=i}get after(){return this.type===l.IDENT?{x:this.x+this.data.length,y:this.y}:{x:this.x,y:this.y}}}function $e(n){const e=new ue;let t=0,r=0,i=1;for(;t<n.length;){if(t+1<n.length&&n[t]==="/"&&n[t+1]==="/"){for(;t<n.length&&n[t]!==`
`;)t++;continue}else if(n[t]==="<")e.push(new v(l.OPEN_ANGLE,void 0,r,i));else if(n[t]===">")e.push(new v(l.CLOSE_ANGLE,void 0,r,i));else if(n[t]==="|")e.push(new v(l.EXTENSION,void 0,r,i));else if(n[t]===",")e.push(new v(l.COMMA,void 0,r,i));else if(n[t]===`
`){i++,r=0,t++;continue}else if(V(n[t])){let s="";const o=r;for(;t<n.length&&V(n[t]);)s+=n[t],t++,r++;s==="-"&&t<n.length&&n[t]===">"?(e.push(new v(l.ARROW,void 0,o,i)),t++,r++):e.push(new v(l.IDENT,s,o,i));continue}r++,t++}return e}function V(n){return` ,<>|
	`.indexOf(n)===-1}class he{constructor(){this.types={IO:1,"IO.null":0,"IO.1":1,"IO.0":1},this.specific_casts={},this.from_casts={},this.to_casts={}}add_cast(e){if(e.pattern instanceof P)e.expression instanceof I||e.expression instanceof O?(this.specific_casts[e.pattern.type]||(this.specific_casts[e.pattern.type]={}),this.specific_casts[e.pattern.type][e.expression.type]||(this.specific_casts[e.pattern.type][e.expression.type]=[]),this.specific_casts[e.pattern.type][e.expression.type].push(e)):(this.from_casts[e.pattern.type]||(this.from_casts[e.pattern.type]=[]),this.from_casts[e.pattern.type].push(e));else if(e.expression instanceof I||e.expression instanceof O)this.to_casts[e.expression.type]||(this.to_casts[e.expression.type]=[]),this.to_casts[e.expression.type].push(e);else throw new b("Ambiguous cast declaration.")}validate(){for(let e in this.specific_casts)for(let t in this.specific_casts[e])for(let r of this.specific_casts[e][t])r.validate(this);for(let e in this.from_casts)for(let t of this.from_casts[e])t.validate(this);for(let e in this.to_casts)for(let t of this.to_casts[e])t.validate(this)}}class L{constructor(e,t){this.name=e,this.subtypes=t}toString(){return this.name+" : "+this.subtypes+";"}}class Q{constructor(e,t){this.pattern=e,this.expression=t}validate(e){const t=this.pattern.validate(e);this.expression.validate(e,t)}toString(){return this.pattern.toString()+" -> "+this.expression.toString()}}class P{constructor(e,t){this.type=e,this.innerPatterns=t}validate(e){const t=e.types[this.type];if(t===void 0)throw new b("No type named '"+this.type+"' defined.");if(t!==this.innerPatterns.length)throw new b("Type '"+this.type+"' requires "+this.innerPatterns.length+" sub-types; got "+t+".");return this.innerPatterns.flatMap(r=>r.validate(e))}matches(e,t={}){if(e.type===this.type&&e.subvalues.length===this.innerPatterns.length){for(let r=0;r<e.subvalues.length;r++)if(!this.innerPatterns[r].matches(e.subvalues[r],t))return!1;return!0}else return!1}toString(){return this.type+"<"+this.innerPatterns.map(e=>e.toString()).join(", ")+">"}}class W{constructor(e){this.name=e}validate(e,t=void 0){if(t&&!t.includes(this.name))throw new b("No variable named '"+this.name+"' defined here.");return this.name}matches(e,t={}){return t[this.name]=e,!0}toString(){return this.name}}class I{constructor(e,t){this.type=e,this.innerExpressions=t}validate(e,t){const r=e.types[this.type];if(r===void 0)throw new b("No type named '"+this.type+"' defined.");if(r!==this.innerExpressions.length)throw new b("Type '"+this.type+"' requires "+this.innerExpressions.length+" sub-types; got "+r+".");for(let i of this.innerExpressions)i.validate(e,t)}toString(){return this.type+"<"+this.innerExpressions.map(e=>e.toString()).join(", ")+">"}}class O{constructor(e,t){this.op=e,this.type=t}validate(e,t){if(!e.types[this.type])throw new b("No type named '"+this.type+"' defined.");this.op.validate(e,t)}toString(){return this.op.toString()+" -> "+this.type}}function de(n){const e=new he;for(;n.length>0;){const t=me(n);t instanceof L?e.types[t.name]=t.subtypes:t instanceof Q&&e.add_cast(t)}return e.validate(),e}function me(n){var t;if(n.length===0)throw new m("Expected definition here.",n.after);const e=n.next();if(e.type===l.IDENT){const r=e.data;if(((t=n.peek())==null?void 0:t.type)===l.OPEN_ANGLE){const i=ge(n);return new L(r,i)}else return new L(r,0)}else if(e.type===l.EXTENSION){if(n.length===0)throw new m("Expected pattern here.",n.after);const r=M(n);if(n.length===0)throw new m("Expected arrow here.",n.after);const i=n.next();if(i.type!==l.ARROW)throw new w("Unexpected token. Expected arrow.",i);if(n.length===0)throw new m("Expected expression here.",n.after);const s=z(n);return new Q(r,s)}else throw new w("Unexpected token. Expected identifier (type name).",e)}function ge(n){if(n.length===0)throw new m("Expected < here.",n.after);const e=n.next();if(e.type!==l.OPEN_ANGLE)throw new w("Unexpected token. Expected sub-type list.",e);if(n.length===0)throw new m("Expected sub-type or > here.",n.after);const t=n.next();if(t.type===l.CLOSE_ANGLE)return 0;if(t.type===l.IDENT){let r=1;for(;;){if(n.length===0)throw new m("Expected , or > here.",n.after);const i=n.next();if(i.type===l.COMMA){if(n.length===0)throw new m("Expected a sub-type here.",n.after);const s=n.next();if(s.type!==l.IDENT)throw new UnexpectedError("Unexpected token. Expected a sub-type name.",s);r++}else{if(i.type===l.CLOSE_ANGLE)break;throw new w("Unexpected token. Expected sub-type or > here.",i)}}return r}else throw new w("Unexpected token. Expected , or > here.",t)}function M(n){if(n.length===0)throw new m("Expected pattern here.",n.after);const e=n.next();if(e.type!==l.IDENT)throw new w("Unexpected token. Expected variable or type destructure.",e);const t=e.data;if(n.length>0&&n.peek().type===l.OPEN_ANGLE){if(n.next(),n.length===0)throw new m("Expected variable, destructure, or > here.",n.after);if(n.peek().type===l.CLOSE_ANGLE)return n.next(),new P(t,[]);{const r=[M(n)];for(;;){if(n.length===0)throw new m("Expected , or > here.",n.after);const i=n.next();if(i.type===l.COMMA){if(n.length===0)throw new m("Expected a pattern here.",n.after);r.push(M(n))}else{if(i.type===l.CLOSE_ANGLE)break;throw new w("Unexpected token. Expected , or > here.",i)}}return new P(t,r)}}else return new W(t)}function z(n){if(n.length===0)throw new m("Expected expression here.",n.after);const e=n.next();if(e.type!==l.IDENT)throw new w("Unexpected token. Expected variable or type construction.",e);const t=e.data;let r;if(n.length>0&&n.peek().type===l.OPEN_ANGLE){if(n.next(),n.length===0)throw new m("Expected variable, construction, or > here.",n.after);if(n.peek().type===l.CLOSE_ANGLE)n.next(),r=new I(t,[]);else{const i=[z(n)];for(;;){if(n.length===0)throw new m("Expected , or > here.",n.after);const s=n.next();if(s.type===l.COMMA){if(n.length===0)throw new m("Expected a variable or construction here.",n.after);i.push(z(n))}else{if(s.type===l.CLOSE_ANGLE)break;throw new w("Unexpected token. Expected , or > here.",s)}}r=new I(t,i)}}else r=new W(t);for(;n.length>0&&n.peek().type===l.ARROW;){if(n.next(),n.length===0)throw new m("Expected type here.",n.after);const i=n.next();if(i.type!==l.IDENT)throw new w("Unexpected token. Expected type here.",i);r=new O(r,i.data)}return r}class N{constructor(e,t){this.type=e,this.subvalues=t}toString(){return this.type+"<"+this.subvalues.map(e=>e.toString()).join(", ")+">"}}function we(n,e){Ee();try{const t=de($e(n)),r=e.split("").map(a=>a.charCodeAt(0).toString(2)).map(a=>a.padStart(Math.ceil(a.length/8)*8,"0").split("")).flat().reverse();let i=new N("IO.null",[]);for(const a of r)a==="0"?i=new N("IO.0",[i]):i=new N("IO.1",[i]);let s=A(t,new O(new O(new N("IO",[i]),"Main"),"IO"),{}).subvalues[0],o="";for(;s.type==="IO.1"||s.type==="IO.0";)if(s.type==="IO.1"?o+="1":o+="0",s=s.subvalues[0],o.length>=8){const a=parseInt(o,2);o="",X(String.fromCharCode(a))}}catch(t){X(t+"")}}function A(n,e,t){var r;if(e instanceof N)return e;if(e instanceof W)return t[e.name];if(e instanceof I)return new N(e.type,e.innerExpressions.map(i=>A(n,i,t)));if(e instanceof O){const i=A(n,e.op,t);let s;if((r=n.specific_casts[i.type])!=null&&r[e.type])s=n.specific_casts[i.type][e.type];else if(n.to_casts[e.type])s=n.to_casts[e.type];else if(n.from_casts[i.type])s=n.from_casts[i.type];else throw new T("Fatal: No cast found.");for(let o of s){const a={};if(o.pattern.matches(i,a))return A(n,o.expression,a)}throw new T("Fatal: No cast found.")}else throw new T("Fatal: Invalid operation attempted: "+e)}var B="",j,Y,S,Z;function _e(n){j=n}function xe(n){S=n,Y=S.value}function ye(n){Z=n}function X(n){B+=n,j.innerHTML=B.replaceAll(`
`,"<br>")}function Ee(){B="",j.innerHTML=""}function be(){we(S.value,Z.value)}function ve(n){if(S.value!==Y){var e="Map data will be erased. Really leave?";return(n||window.event).returnValue=e,e}}function Ne(n){n.ctrlKey&&n.key==="s"&&(n.preventDefault(),Ce("code.cast",S.value))}function Ce(n,e){let t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download",n),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}function Oe(n){let e;return{c(){e=U("Back")},l(t){e=D(t,"Back")},m(t,r){_(t,e,r)},d(t){t&&x(e)}}}function Ie(n){let e;return{c(){e=U("Reference")},l(t){e=D(t,"Reference")},m(t,r){_(t,e,r)},d(t){t&&x(e)}}}function Se(n){let e,t,r,i;return e=new se({props:{href:"langs",$$slots:{default:[Oe]},$$scope:{ctx:n}}}),r=new le({props:{href:"https://esolangs.org/wiki/Cast",$$slots:{default:[Ie]},$$scope:{ctx:n}}}),{c(){p(e.$$.fragment),t=y(),p(r.$$.fragment)},l(s){c(e.$$.fragment,s),t=E(s),c(r.$$.fragment,s)},m(s,o){u(e,s,o),_(s,t,o),u(r,s,o),i=!0},p(s,o){const a={};o&64&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const f={};o&64&&(f.$$scope={dirty:o,ctx:s}),r.$set(f)},i(s){i||($(e.$$.fragment,s),$(r.$$.fragment,s),i=!0)},o(s){h(e.$$.fragment,s),h(r.$$.fragment,s),i=!1},d(s){s&&x(t),d(e,s),d(r,s)}}}function Ae(n){let e,t,r;function i(o){n[3](o)}let s={id:"codebox",init:`// Cat program
Main<I>
| IO<I> -> Main<I>
| Main<I> -> IO<I>`};return n[0]!==void 0&&(s.element=n[0]),e=new J({props:s}),G.push(()=>H(e,"element",i)),{c(){p(e.$$.fragment)},l(o){c(e.$$.fragment,o)},m(o,a){u(e,o,a),r=!0},p(o,a){const f={};!t&&a&1&&(t=!0,f.element=o[0],R(()=>t=!1)),e.$set(f)},i(o){r||($(e.$$.fragment,o),r=!0)},o(o){h(e.$$.fragment,o),r=!1},d(o){d(e,o)}}}function Te(n){let e,t,r;function i(o){n[4](o)}let s={id:"inputbox",init:"Input Here"};return n[2]!==void 0&&(s.element=n[2]),e=new J({props:s}),G.push(()=>H(e,"element",i)),{c(){p(e.$$.fragment)},l(o){c(e.$$.fragment,o)},m(o,a){u(e,o,a),r=!0},p(o,a){const f={};!t&&a&4&&(t=!0,f.element=o[2],R(()=>t=!1)),e.$set(f)},i(o){r||($(e.$$.fragment,o),r=!0)},o(o){h(e.$$.fragment,o),r=!1},d(o){d(e,o)}}}function Le(n){let e;return{c(){e=U("Execute")},l(t){e=D(t,"Execute")},m(t,r){_(t,e,r)},d(t){t&&x(e)}}}function Pe(n){let e,t;return e=new ce({props:{click:be,$$slots:{default:[Le]},$$scope:{ctx:n}}}),{c(){p(e.$$.fragment)},l(r){c(e.$$.fragment,r)},m(r,i){u(e,r,i),t=!0},p(r,i){const s={};i&64&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){h(e.$$.fragment,r),t=!1},d(r){d(e,r)}}}function Me(n){let e,t,r,i;return e=new C({props:{size:"2",padded:!0,$$slots:{default:[Te]},$$scope:{ctx:n}}}),r=new C({props:{size:"1",padded:!0,$$slots:{default:[Pe]},$$scope:{ctx:n}}}),{c(){p(e.$$.fragment),t=y(),p(r.$$.fragment)},l(s){c(e.$$.fragment,s),t=E(s),c(r.$$.fragment,s)},m(s,o){u(e,s,o),_(s,t,o),u(r,s,o),i=!0},p(s,o){const a={};o&68&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const f={};o&64&&(f.$$scope={dirty:o,ctx:s}),r.$set(f)},i(s){i||($(e.$$.fragment,s),$(r.$$.fragment,s),i=!0)},o(s){h(e.$$.fragment,s),h(r.$$.fragment,s),i=!1},d(s){s&&x(t),d(e,s),d(r,s)}}}function ze(n){let e,t;return e=new K({props:{$$slots:{default:[Me]},$$scope:{ctx:n}}}),{c(){p(e.$$.fragment)},l(r){c(e.$$.fragment,r)},m(r,i){u(e,r,i),t=!0},p(r,i){const s={};i&68&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){h(e.$$.fragment,r),t=!1},d(r){d(e,r)}}}function Be(n){let e,t,r,i;return e=new C({props:{size:"6",padded:!0,$$slots:{default:[Ae]},$$scope:{ctx:n}}}),r=new C({props:{size:"1",$$slots:{default:[ze]},$$scope:{ctx:n}}}),{c(){p(e.$$.fragment),t=y(),p(r.$$.fragment)},l(s){c(e.$$.fragment,s),t=E(s),c(r.$$.fragment,s)},m(s,o){u(e,s,o),_(s,t,o),u(r,s,o),i=!0},p(s,o){const a={};o&65&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const f={};o&68&&(f.$$scope={dirty:o,ctx:s}),r.$set(f)},i(s){i||($(e.$$.fragment,s),$(r.$$.fragment,s),i=!0)},o(s){h(e.$$.fragment,s),h(r.$$.fragment,s),i=!1},d(s){s&&x(t),d(e,s),d(r,s)}}}function Ge(n){let e,t;return e=new ae({props:{$$slots:{default:[Be]},$$scope:{ctx:n}}}),{c(){p(e.$$.fragment)},l(r){c(e.$$.fragment,r)},m(r,i){u(e,r,i),t=!0},p(r,i){const s={};i&69&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){h(e.$$.fragment,r),t=!1},d(r){d(e,r)}}}function Re(n){let e,t,r;function i(o){n[5](o)}let s={};return n[1]!==void 0&&(s.consoleElement=n[1]),e=new pe({props:s}),G.push(()=>H(e,"consoleElement",i)),{c(){p(e.$$.fragment)},l(o){c(e.$$.fragment,o)},m(o,a){u(e,o,a),r=!0},p(o,a){const f={};!t&&a&2&&(t=!0,f.consoleElement=o[1],R(()=>t=!1)),e.$set(f)},i(o){r||($(e.$$.fragment,o),r=!0)},o(o){h(e.$$.fragment,o),r=!1},d(o){d(e,o)}}}function Ue(n){let e,t,r,i;return e=new C({props:{size:"3",$$slots:{default:[Ge]},$$scope:{ctx:n}}}),r=new C({props:{size:"1",padded:!0,$$slots:{default:[Re]},$$scope:{ctx:n}}}),{c(){p(e.$$.fragment),t=y(),p(r.$$.fragment)},l(s){c(e.$$.fragment,s),t=E(s),c(r.$$.fragment,s)},m(s,o){u(e,s,o),_(s,t,o),u(r,s,o),i=!0},p(s,o){const a={};o&69&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const f={};o&66&&(f.$$scope={dirty:o,ctx:s}),r.$set(f)},i(s){i||($(e.$$.fragment,s),$(r.$$.fragment,s),i=!0)},o(s){h(e.$$.fragment,s),h(r.$$.fragment,s),i=!1},d(s){s&&x(t),d(e,s),d(r,s)}}}function De(n){let e,t,r,i,s,o;return e=new oe({}),r=new fe({props:{title:"Cast",$$slots:{default:[Se]},$$scope:{ctx:n}}}),s=new K({props:{$$slots:{default:[Ue]},$$scope:{ctx:n}}}),{c(){p(e.$$.fragment),t=y(),p(r.$$.fragment),i=y(),p(s.$$.fragment)},l(a){c(e.$$.fragment,a),t=E(a),c(r.$$.fragment,a),i=E(a),c(s.$$.fragment,a)},m(a,f){u(e,a,f),_(a,t,f),u(r,a,f),_(a,i,f),u(s,a,f),o=!0},p(a,f){const g={};f&64&&(g.$$scope={dirty:f,ctx:a}),r.$set(g);const q={};f&71&&(q.$$scope={dirty:f,ctx:a}),s.$set(q)},i(a){o||($(e.$$.fragment,a),$(r.$$.fragment,a),$(s.$$.fragment,a),o=!0)},o(a){h(e.$$.fragment,a),h(r.$$.fragment,a),h(s.$$.fragment,a),o=!1},d(a){a&&(x(t),x(i)),d(e,a),d(r,a),d(s,a)}}}function He(n){let e,t,r,i,s,o;return e=new re({props:{title:"Cast Language Interpreter",desc:"Interpreter for the Cast programming language."}}),r=new ie({props:{$$slots:{default:[De]},$$scope:{ctx:n}}}),{c(){p(e.$$.fragment),t=y(),p(r.$$.fragment)},l(a){c(e.$$.fragment,a),t=E(a),c(r.$$.fragment,a)},m(a,f){u(e,a,f),_(a,t,f),u(r,a,f),i=!0,s||(o=[F(window,"beforeunload",ve),F(window,"keydown",Ne)],s=!0)},p(a,[f]){const g={};f&71&&(g.$$scope={dirty:f,ctx:a}),r.$set(g)},i(a){i||($(e.$$.fragment,a),$(r.$$.fragment,a),i=!0)},o(a){h(e.$$.fragment,a),h(r.$$.fragment,a),i=!1},d(a){a&&x(t),d(e,a),d(r,a),s=!1,ee(o)}}}function We(n,e,t){let r,i,s;function o(g){r=g,t(0,r)}function a(g){s=g,t(2,s)}function f(g){i=g,t(1,i)}return n.$$.update=()=>{n.$$.dirty&7&&(r&&xe(r),i&&_e(i),s&&ye(s))},[r,i,s,o,a,f]}class Ze extends te{constructor(e){super(),ne(this,e,We,He,k,{})}}export{Ze as component};
